!function(t){function e(e){for(var a,i,o=e[0],l=e[1],d=e[2],c=0,u=[];c<o.length;c++)i=o[c],r[i]&&u.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);for(m&&m(e);u.length;)u.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={7:0},r={7:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[];i[t]?e.push(i[t]):0!==i[t]&&{3:1}[t]&&e.push(i[t]=new Promise(function(e,n){for(var a="css/"+({3:"editorjs"}[t]||t)+".css",r=o.p+a,s=document.getElementsByTagName("link"),l=0;l<s.length;l++){var d=(m=s[l]).getAttribute("data-href")||m.getAttribute("href");if("stylesheet"===m.rel&&(d===a||d===r))return e()}var c=document.getElementsByTagName("style");for(l=0;l<c.length;l++){var m;if((d=(m=c[l]).getAttribute("data-href"))===a||d===r)return e()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=e,u.onerror=function(e){var a=e&&e.target&&e.target.src||r,s=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete i[t],u.parentNode.removeChild(u),n(s)},u.href=r,document.getElementsByTagName("head")[0].appendChild(u)}).then(function(){i[t]=0}));var n=r[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise(function(e,a){n=r[t]=[e,a]});e.push(n[2]=a);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=function(t){return o.p+"js/"+({3:"editorjs"}[t]||t)+".js"}(t),s=function(e){l.onerror=l.onload=null,clearTimeout(d);var n=r[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+a+": "+i+")");s.type=a,s.request=i,n[1](s)}r[t]=void 0}};var d=setTimeout(function(){s({type:"timeout",target:l})},12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o.p=window.SF.staticUrl||o.p,o.oe=function(t){throw console.error(t),t};var l=window.webpackJsonp=window.webpackJsonp||[],d=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var m=d;s.push([78,0]),n()}({0:function(t,e){t.exports=jQuery},78:function(t,e,n){"use strict";n.r(e);n(11);var a=n(0),i=n(2),r=n(14),s=n(6),o=n(1),l=n(10),d=n.n(l);n(23),n(24),n(25);a(function(){var t;i.a.watch(),o.u.runCommonFun(!0),o.u.imageView(),i.b.add(s.b,s.e,s.a,s.d,s.g),Object(o.m)(a("article")),a(".article.fmt").find("code").length&&Object(o.n)(a(".article.fmt")),Object(o.p)(),new o.e(a(".functional-area-bottom"),{isColumn:!1,btns:["mainLike","downLike","mainBookmark","follow"],pageType:"question"}),new o.e(a(".functional-area-left"),{isColumn:!0,btns:["mainBookmark","share"],pageType:"question"}),o.u.backtopInit(),Object(o.s)({$parent:a("footer").find(".shareContent"),tip:!1,icons:["weixin","weibo","github","twitter"]}),a("footer .dropdown-item").removeClass("dropdown-item"),a('[data-toggle="tooltip"]').tooltip(),Object(o.t)(""),o.u.eventJump(),a(document).on("click",".answer-text",function(){var e=a("#text-hidden").val();n.e(3).then(n.bind(null,16)).then(function(n){var i=n.default,r=a("#sfEditor");r.parent().find("textarea").remove(),a("#editorDiv").height(350),t=i({el:r[0],initialValue:e||""}),a("button.te-switch-button.modeBtn").trigger("click").trigger("mouseout").remove(),!e&&t.setValue(""),t.focus(),a("#editorDiv").after(a(".te-preview").removeClass("hidden").addClass("p-3").css({backgroundColor:"#f8f9fa"})),new o.c(t,"answer").bind()})}).on("submit",function(t){if(13==t.keyCode)return!1}),function(){function e(t,e){return'<li class="list-group-item px-0 bg-light border-0 commentUnit">\n            <div class="font-size-14 mb-2">\n                <a class="d-uname" href="'+t.user.url+'" target="_blank"><strong>'+t.user.name+'</strong></a>：\n                <div class="parsedText fmt">'+t.parsedText+'</div>\n            </div>\n            <form class="d-none edit-form edit-reply-form"\n                action="/api/comment/'+t.id+'/edit" method="post">\n                <div class="form-group">\n                    <textarea autoHeight="true" class="form-control form-control-sm comment-text" rows="1" placeholder="撰写评论 ..." style="" name="text"\n                        data-init=\''+t.originalText+'\'></textarea>\n                </div>\n                <div class="my-3 d-flex align-content-center justify-content-end">\n                    <button type="button" class="btn btn-outline-secondary btn-sm mr-2 edit-top-comment-cancel-btn cancelEdit">\n                        取消\n                    </button>\n                    <button type="button" submit-type="reply-edit" class="btn btn-primary btn-sm">\n                        提交\n                    </button>\n                    <input type="hidden" name="id" value="'+t.id+'" autocomplete="off">\n                </div>\n            </form>\n            <div class="handle-bar font-size-14 d-flex justify-content-between ">\n                <div>\n                    <a class="text-secondary" href="Javascript:;">\n                    <span class="mainLike-comment '+(t.isLiked?"active":"")+'" data-id="'+t.id+'">\n                        <i class="'+(t.isLiked?"fas":"far")+' fa-thumbs-up mr-1"></i>\n                    </span>\n                    <span data-icon-count-size=""\n                        data-count-hidden="true"\n                        class="mainLike-commentNum">\n                        '+(~~t.votes?t.votes:"")+'</span> </a>\n                    <span class="split-dot"></span>\n                    <a class="text-secondary btn-reply" href="Javascript:;" data-id="'+t.id+'">回复</a>\n                    <span class="split-dot"></span>\n                    <span class="ml-1 text-secondary">'+t.createdDate+'</span>\n                </div>\n                <div class="comment-control-area d-none">\n                    '+(t.canEdit?'<a class="text-secondary edit" href="Javascript:;">编辑</a><span class="split-dot"></span>':"")+"\n                    "+(t.canDelete?'<a class="text-secondary delete" href="Javascript:;" data-button-action="/api/comment/'+t.id+'/delete">删除</a><span class="split-dot"></span>':"")+"\n                    "+(a("#SFUserId").length?"<a class=\"text-secondary reply-report\" data-dotype=\"modal\"\n                            data-content=\"{'type':'form','asyncUrl':'/iteration/api/reason/comment/report?id="+t.id+"','data':null}\"\n                            data-api=\"/iteration/api/comment/"+t.id+'/report" href="Javascript:;">举报</a>':"")+'\n                </div>\n            </div>\n            <form id="reply-'+t.id+'-form" class="d-none my-2 add-comment-form"\n                    action="/api/comment/'+e+'/reply" method="post">\n                <div class="form-group">\n                    <textarea autoHeight="true" class="form-control form-control-sm reply-text" rows="1" placeholder="撰写评论 ..." style="" name="text" placeholder="撰写评论..."></textarea>\n                </div>\n                <div class="mt-y d-flex align-content-center justify-content-end">\n                    <button type="button" submit-type="reply" class="btn btn-primary btn-sm" data-commentid="'+e+'">\n                        提交评论\n                    </button>\n                    <input type="hidden" name="replyUserId" value="'+t.user.id+'" autocomplete="off">\n                </div>\n            </form>\n        </li>'}a(".replies").each(function(t,n){var i=a(n).data("content"),r=a(n).data("hasmore"),s="";i&&(i.forEach(function(t){s+=e(t,Number(t.reply_comment_id)||t.id)}),r&&(s+='<div class="font-size-14 d-flex py-2 my-1 loader d-none"><a class="text-secondary next-page-btn" href="javascript:;">展开显示更多</a></div>'),a(n).removeClass("d-none").find(".reply-list").append(s))}),d()(a("textarea[autoHeight]")),o.u.textareaAutoHeight(),a("textarea[autoHeight]").atwho({at:"@",callbacks:{remote_filter:function(t,e){var n=window.ARTICLE.articleId;if(t){if(t)return a.getJSON("/api/users/search",{q:t},function(t){t.status||e(t.data)})}else if(n.toString().match(/^11|^12|^13/))return a.getJSON("/api/users/search",{objectId:n},function(t){t.status||e(t.data)})},tpl_eval:function(t,e){return'<li data-value="@'+e.name+"["+e.slug+']">'+(e.avatarUrl?'<img class="avatar-24 mr-2" src="'+e.avatarUrl+'" />':"")+'<span class="font-size-14">'+e.name+"</span> &nbsp; <small>@"+e.slug+"</small></li>"}}}),Object(o.t)("reply-report"),Object(o.t)("comment-report"),a(document).on("click","button[submit-type]",function(){var n=a(this),i=n.parents("form"),r=new FormData(i[0]);return i.hasClass("answer-form")?r.append("text",t.getValue()):r.append("text",i.find("textarea").val()),a(window).off("beforeunload"),a.ajax({url:i.attr("action"),method:"POST",data:r,processData:!1,contentType:!1,success:function(t){var r=t.status,s=t.data;if(r){if("remote"==s[0])return new o.h,!1;if("login"==s[0])return new o.f,!1;o.u.addErrorTip(i[0],s[1])}else{switch(n.attr("submit-type")){case"reply":i.parents(".media-body").find(".reply-list").removeClass("d-none").prepend(a(e(s.comment,n.data("commentid")))),i.parents(".media-body").find(".replies").removeClass("d-none"),d()(a("textarea[autoHeight]")),i.parent("div").length?i.parent("div").addClass("d-none").find("textarea").val("").trigger("autoHeight"):i.addClass("d-none").find("textarea").val("").trigger("autoHeight");break;case"comment":location.reload();break;case"answer-reply":i.parent().addClass("d-none").next().removeClass("d-none").find(".reply-list").prepend(a(e(s.comment,s.comment.id))),i.find("textarea").val("").trigger("autoHeight");break;case"comment-edit":case"reply-edit":i.addClass("d-none").parents(".commentUnit").find(".parsedText").html(s.parsedText).show(),i.find("textarea").data("init",s.originalText),i.addClass("d-none").find("textarea").val("").trigger("autoHeight")}Object(o.t)("reply-report"),Object(o.t)("comment-report")}}}),!1}).on("click",".question-reply-btn",function(){a(".question-comment-form").parent().toggleClass("d-none").find("textarea").focus()}).on("click",".next-page-btn",function(){var t=a(this).parents(".replies").hasClass("question-replies")?"question":"answer",n=a(this).parents(".replies").find(".reply-list"),i="/api/"+t+"/"+n.parents(".replies").data("id")+"/comments?page="+n.data("page")+"&pageSize=15&sort=asc",r=n.next("div");a.get(i,function(t){if(0===t.status){var a=t.data,i=a.rows,s=a.hasMore,l="";i.length&&(i.forEach(function(t){l+=e(t,Number(t.reply_comment_id)||t.id)}),n.empty().append(l),Object(o.t)("reply-report")),s?n.data("page",1+~~n.data("page")):r.remove()}else n.append('<div class="text-center text-secondary p-3">数据加载失败</div>')})}),a("#comment-area").find("textarea").bind("paste",function(t){var e=t.originalEvent.clipboardData.getData("text");document.execCommand("insertText",!1,e)||Object(r.a)(a(this)[0],e),t.originalEvent.preventDefault()}),a("#comment-area, .question-replies").on("click",".btn-reward",function(){var t=a(this).data("payid");new o.k(t)}).on("click",".showIgnored",function(){a(this).parent().remove(),a(".ignore-answer").removeClass("d-none")}).on("mouseover",".commentUnit",function(){var t=a(this).parent().hasClass("reply-list")?".comment-control-area":".control-area";a(this).find(t).removeClass("d-none")}).on("mouseout",".commentUnit",function(){var t=a(this).parent().hasClass("reply-list")?".comment-control-area":".control-area";a(this).find(t).addClass("d-none")}).on("click",".btn-comment",function(){var t=a(this).data("id");a(this).parents(".commentUnit").find("#answer-"+t+"-form").toggleClass("d-none").find("textarea").focus()}).on("click",".btn-reply",function(){var t=a(this).data("id"),e=a(this).parents(".commentUnit").find("#reply-"+t+"-form"),n=e.find("textarea"),i=a(this).parents(".commentUnit").find("a.d-uname"),r=i.find("strong").text(),s=i.attr("href").split("/u/")[1];e.toggleClass("d-none"),n.focus().val("@"+r+"["+s+"] ").trigger("autoHeight")}).on("click",".edit",function(){var t=a(this).parents(".commentUnit").find("form.edit-form");t.removeClass("d-none").find("textarea").val(t.find("textarea").data("init")).trigger("autoHeight"),a(this).parents(".commentUnit").find(".parsedText").hide()}).on("click",".cancelEdit",function(){a(this).parents("form").addClass("d-none").find("textarea").val(""),a(this).parents(".commentUnit").find(".parsedText").show()}).on("click",".delete",function(){var t=a(this),e=t.data("button-action"),n=t.parents(".replies").length?"回复":"回答";new o.j({isTip:!0,title:"删除"+n,content:"确定要删除该"+n+"吗",comfirmApi:e,doneFn:function(){t.parents("li.commentUnit").length&&t.parents("li.commentUnit").remove(),t.parents("div.commentUnit").length&&t.parents("div.commentUnit").parent().remove()}}).show()})}(),a("#paradigm-question-related").length&&void 0!==window.ParadigmSDK&&window.ParadigmSDK.getRecommItems("586",function(t){var e="";t.length?(t.forEach(function(t){t.title=t.title.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),e+='<a class="list-group-item list-group-item-action" href="'+t.url+'" target="_blank">\n                            <span class="mb-2 text-body">'+t.title+'</span>\n                            <span class="d-inline-block text-primary">阅读 '+t.item_read_cnt+"</span></a>"}),a(".similar-problem").append(e).append('<div class="text-center my-2 py-1">找不到问题？<a class="active" href="/ask" target="_blank">创建新问题</a></div>')):a(".similar-problem").append('<div class="text-center my-2 py-1">找不到问题？<a class="active" href="/ask" target="_blank">创建新问题</a></div>'),new o.a}),function(){var t="我在 @SegmentFault 上遇到了问题「"+a(".invite-btn").data("title")+"」 → "+a(".invite-btn").data("url")+"，希望您能帮我解答 ";function e(t){var e=Array.from(a("#invite-numbers a").map(function(t,e){return a(e).attr("href")})),n="";return t.forEach(function(t){e.includes(t.url)&&(t.id="active"),n+='<li class="list-group-item sflex-center border-0 py-2 px-0 pr-1" style="min-height: 60px">\n                    <div class="d-flex align-items-center flex-grow-1">\n                        <img class="rounded-circle mr-2" width="32" src="'+t.avatarUrl+'" aria-hidden="true"/>\n                        <div>\n                            <a href="'+t.url+'" target="_blank">'+t.name+'</a>\n                            <div class="text-secondary font-size-14">'+t.tagName+" 标签下有 "+t.tagAnswers+' 个回答</div>\n                        </div>\n                    </div>\n                    <button class="btn btn-light btn-sm invite-user-btn '+("active"==t.id?"active":"")+'"\n                        data-id="'+t.id+'" data-slug="'+t.slug+'">'+("active"==t.id?"已经邀请":"邀请回答")+"</button>\n                </li>\n                "}),n}a(document).on("click",".invite-btn",function(){new o.j({title:"邀请回答",isTip:!1,comfirmApi:"",footer:'<div class="invite-btn-group d-none"><button type="button" class="btn btn-secondary mr-1" data-dismiss="modal">取消</button>\n                        <button type="button" class="btn btn-primary at-weibo">确定</button></div>',content:'\n                        <ul class="nav nav-tabs invite-tab">\n                            <li class="nav-item default">\n                                <a class="nav-link active" href="javascript:;">站内邀请</a>\n                            </li>\n                            <li class="nav-item">\n                                <a class="nav-link" href="javascript:;">微博邀请</a>\n                            </li>\n                        </ul>\n                        <div class="card invite-card border-0">\n                            <div class="card-body pt-3 pb-0 px-0 active">\n                                <label>今天还能邀请 <span class="can-invited-num"></span> 人</label>\n                                <div>\n                                    <input type="text" class="form-control" id="inviteSearch" placeholder="搜索你要邀请的人">\n                                </div>\n                                <small id="invite-numbers" class="form-text text-muted"><span class="d-none"> 已被邀请</span></small>\n                                <ul class="list-group invite-list" style="overflow-y: auto;">\n\n                                </ul>\n                            </div>\n                            <form class="card-body px-0 pb-0 d-none invite-weibo">\n                                <div class="form-group input-group">\n                                    <div class="input-group-prepend">\n                                        <span class="input-group-text" id="atweibo">@</span>\n                                    </div>\n                                    <input type="text" class="form-control" placeholder="微博用户名" aria-label="微博用户名" aria-describedby="atweibo">\n                                </div>\n                                <div class="form-group mb-0">\n                                    <textarea class="form-control" rows="3"></textarea>\n                                </div>\n                            </form>\n                        </div>',showFn:function(){a(".modal-body-content").addClass("mb-0"),a(".invite-weibo textarea").val(t),a(".modal-footer").addClass("d-none"),a.get("/api/question/"+window.ARTICLE.articleId+"/invite/default",function(t){if(t.status)a("#sfModal").find(".modal-body-content").html("读取配置失败");else{var n=t.data,i=n.hasInvited,r=n.limit,s=n.list,o="",l="";i.length&&(i.forEach(function(t,e){o+=(e?"、":"")+'<a href="'+t.url+'" target="_blank">'+t.name+"</a>"}),a("#invite-numbers").find("span").removeClass("d-none").before(o)),s.length&&a(".invite-list").height(250),s.length&&(l=e(s),a(".invite-list").html(l)),a(".can-invited-num").text(~~r.userLast>0?r.userLast:"0"),a("#inviteSearch").prop("disabled",~~r.userLast<=0)}})}}).show()}).on("click",".invite-tab .nav-item",function(){a(".invite-tab a").toggleClass("active"),a(".invite-card .card-body").toggleClass("d-none"),a(".invite-btn-group").toggleClass("d-none").parent().removeClass("sflex-center"),a(".modal-footer").toggleClass("d-none",a(this).hasClass("default"))}).on("click",".invite-user-btn",function(){var t=a(this),e=t.data("id"),n=t.data("slug");t.hasClass("active")||a.sfPost({url:"/api/question/"+window.ARTICLE.articleId+"/invite/user",data:{userId:e,slug:n}},function(e){var n=e.data,i=n.url,r=n.name;t.text("已经邀请").addClass("active"),a("#invite-numbers").find("span").removeClass("d-none").before((a("#invite-numbers").children().length>1?"、":"")+'<a href="'+i+'" target="_blank">'+r+"</a>"),a(".can-invited-num").text(~~a(".can-invited-num").text()-1>0?~~a(".can-invited-num").text()-1:"0"),a("#inviteSearch").prop("disabled",~~a(".can-invited-num").text()<=0),~~a(".can-invited-num").text()<=0&&a(".invite-list").addClass("d-none")})}).on("click",".at-weibo",function(){var t=a(".invite-weibo textarea").val(),e="@"+a(".invite-weibo input").val();window.open("http://service.weibo.com/share/share.php?title="+t+e+"&appkey=1742025894","_blank")}).on("input propertychange","#inviteSearch",function(){var t,n=a(this);t&&clearTimeout(t),t=setTimeout(function(){a.get("/api/question/"+window.ARTICLE.articleId+"/invite/search?q="+a.trim(n.val()),function(t){var n=t.status,i=t.data;if(!n){var r="";i.length&&a(".invite-list").height(250),i.length&&(r=e(i),a(".invite-list").html(r))}})},500)})}(),a(document).on("click",".like-btn",function(){var t=a(this),e=t.data("type"),n=t.data("id");a(this).hasClass("mainLike")&&(a(this).hasClass("active")?a.sfPost({url:"/api/"+e+"/"+n+"/like/cancel",data:{}},function(e){var n=e.data,a=n.votes,i=n.like,r=n.hate;t.removeClass("active").find(".mainLikeNum").html(~~a?a:"").prev("span").html("赞"),t.parents(".btn-group").attr("title","+"+i+" / -"+r)}):a.sfPost({url:"/api/"+e+"/"+n+"/like",data:{}},function(e){var n=e.data,a=n.votes,i=n.like,r=n.hate;t.addClass("active").find(".mainLikeNum").html(a).prev("span").html("已赞"),t.siblings(".downLike").removeClass("active").find("svg").next().html("踩"),t.parents(".btn-group").attr("title","+"+i+" / -"+r)})),a(this).hasClass("downLike")&&(a(this).hasClass("active")?a.sfPost({url:"/api/"+e+"/"+n+"/hate/cancel",data:{}},function(e){var n=e.data,a=n.votes,i=n.like,r=n.hate;t.removeClass("active").siblings(".mainLike").find(".mainLikeNum").html(~~a?a:""),t.find("svg").next().html("踩"),t.parents(".btn-group").attr("title","+"+i+" / -"+r)}):a.sfPost({url:"/api/"+e+"/"+n+"/hate",data:{}},function(e){var n=e.data,a=n.votes,i=n.like,r=n.hate;t.addClass("active").siblings(".mainLike").removeClass("active").find(".mainLikeNum").html(~~a?a:"").prev("span").html("赞"),t.find("svg").next().html("已踩"),t.popover("show"),t.parents(".btn-group").attr("title","+"+i+" / -"+r)}))}).on("blur",".downLike",function(){a(this).popover("dispose")}).on("click",".mainLike-comment",function(){var t=a(this),e=a(this).data("id");t.hasClass("active")?a.sfPost({url:"/api/comment/"+e+"/like/cancel",data:{}},function(e){t.removeClass("active").empty().append('<i class="far fa-thumbs-up mr-1"></i>'),t.next(".mainLike-commentNum").text(~~e.data?~~e.data:"")}):a.sfPost({url:"/api/comment/"+e+"/like",data:{}},function(e){var n=e.data;n.votes,n.like,n.hate;t.addClass("active").empty().append('<i class="fas fa-thumbs-up mr-1"></i>'),t.next(".mainLike-commentNum").text(e.data)})})})}});